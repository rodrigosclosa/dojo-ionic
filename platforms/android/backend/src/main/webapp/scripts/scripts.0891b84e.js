"use strict";angular.module("adminApp",["ngAnimate","ngAria","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).when("/base",{templateUrl:"views/base.html",controller:"BaseCtrl"}).when("/predio",{templateUrl:"views/predio.html",controller:"PredioCtrl"}).when("/produtos",{templateUrl:"views/produtos.html",controller:"ProdutosCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("adminApp").controller("MainCtrl",["$scope",function(a){var b="//"+window.location.host+"/_ah/api",c=c||{};c.appengine=c.appengine||{},c.appengine.mercadocit=c.appengine.mercadocit||{},c.appengine.mercadocit.admin=c.appengine.mercadocit.admin||{},c.appengine.mercadocit.admin.CLIENT_ID="1070033295282-3da3me5q9o8dbir6il7998lsf0d4sj5t.apps.googleusercontent.com",c.appengine.mercadocit.admin.SCOPES="https://www.googleapis.com/auth/userinfo.email",c.appengine.mercadocit.admin.signedIn=!1,a.userAuthed=function(){gapi.client.oauth2.userinfo.get().execute(function(a){a.code||(c.appengine.mercadocit.admin.signedIn=!0,document.querySelector("#signinButton").textContent="Sign out")})},a.signin=function(a,b){gapi.auth.authorize({client_id:c.appengine.mercadocit.admin.CLIENT_ID,scope:c.appengine.mercadocit.admin.SCOPES,immediate:a},b)},a.auth=function(){c.appengine.mercadocit.admin.signedIn?(c.appengine.mercadocit.admin.signedIn=!1,document.querySelector("#signinButton").textContent="Google Login"):a.signin(!1,a.userAuthed)},a.init=function(){var c,d=function(){0==--c&&a.signin(!0,a.userAuthed)};c=9,gapi.client.load("base","v1",d,b),gapi.client.load("predio","v1",d,b),gapi.client.load("produto","v1",d,b),gapi.client.load("produtoComentario","v1",d,b),gapi.client.load("produtoFoto","v1",d,b),gapi.client.load("usuario","v1",d,b),gapi.client.load("usuarioFavorito","v1",d,b),gapi.client.load("usuarioLike","v1",d,b),gapi.client.load("oauth2","v2",d)};var d=document.querySelector("#signinButton");d.addEventListener("click",a.auth)}]),angular.module("adminApp").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("adminApp").controller("BaseCtrl",["$scope","api",function(a,b){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"],a.base={nome:"",icone:"teste"},a.list=[],a.editar=function(b){a.base=b},a.excluir=function(c){var d=a.list.splice(a.list.indexOf(c),1);console.log(d),b["delete"]("base/v1/delete/"+d[0].id)},a.submit=function(){var c=a.base;void 0!=c.id?b.put("base/v1/update",c).success(function(a){}).error(function(a){console.log(a)}):b.post("base/v1/new",c).success(function(b){b={},b.nome=a.base.nome,b.id=10,a.list.push(b)}).error(function(a){console.log(a)})},a.load=function(){b.get("base/v1/get").success(function(b){console.log(b),a.list=b.items}).error(function(a){console.log(a)})},a.list=[],a.load()}]),angular.module("adminApp").controller("ProdutosCtrl",["$scope","api",function(a,b){b.get("produto/v1/get").success(function(b){console.log(b),a.list=b.items}).error(function(a){console.log(a)})}]),angular.module("adminApp").service("api",["$http",function(a){var b={};return b.get=function(b,c){return b="https://mercado-cit.appspot.com/_ah/api/"+b,a.get(b,c)},b.post=function(b,c){return b="https://mercado-cit.appspot.com/_ah/api/"+b,a.post(b,c)},b["delete"]=function(b,c){return b="https://mercado-cit.appspot.com/_ah/api/"+b,a["delete"](b,c)},b.put=function(b,c){return b="https://mercado-cit.appspot.com/_ah/api/"+b,a.put(b,c)},b}]),angular.module("adminApp").controller("PredioCtrl",["$scope","api",function(a,b){a.predios=[],a.predio={nome:"",icone:"teste",idBase:""},a.bases=[];var c=function(){b.get("predio/v1/get").success(function(b){console.log(b),a.predios=b.items}).error(function(a){console.log(a)})};a.editar=function(b){console.log(b),a.predio=b,a.base=b.base},a.excluir=function(c){var d=a.predios.splice(a.predios.indexOf(c),1);console.log(d),b["delete"]("predio/v1/delete/"+d[0].id)},a.submit=function(){if(void 0!=a.predio.id){var c=a.predio;c.idBase=a.base.id,console.log(c),b.put("predio/v1/update",c).success(function(a){console.log(a)}).error(function(a){console.log(a)})}else{var d=a.predio;d.idBase=a.base.id,console.log(d),b.post("predio/v1/new",d).success(function(b){b={},b.nome=a.predio.nome,b.base=a.base,a.bases.push(b)}).error(function(a){alert("Erro ao cadastrar...")})}},a.load=function(){c(),b.get("base/v1/get").success(function(b){console.log(b),a.bases=b.items}).error(function(a){console.log(a)})},a.load()}]),angular.module("adminApp").run(["$templateCache",function(a){a.put("views/about.html","<p>This is the about view.</p>"),a.put("views/base.html",'<h1>Base</h1> <form novalidate ng-submit="submit()"> <div class="mdl-textfield mdl-js-textfield"> <input class="mdl-textfield__input" type="text" id="name" ng-model="base.nome"> <label class="mdl-textfield__label" for="name">Name</label> </div> <input type="submit" class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored" value="Adicionar"> <input type="submit" class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored" value="Concluir">  </form> <!-- List --> <ul class="demo-list-item mdl-list"> <li class="mdl-list__item" ng-repeat="item in list track by $index"> <span class="mdl-list__item-primary-content"> {{ item.nome }} </span> <button class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored" ng-click="editar(item)"> <i class="fa fa-pencil-square-o" aria-hidden="true"></i> </button>&nbsp; <button class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored" ng-click="excluir(item)"> <i class="fa fa-trash" aria-hidden="true"></i> </button> </li> </ul>'),a.put("views/main.html",'<div class="jumbotron"> <h1>\'Allo, \'Allo!</h1> <p class="lead"> <img src="images/yeoman.8cb970fb.png" alt="I\'m Yeoman"><br> Always a pleasure scaffolding your apps. </p> <p><a class="btn btn-lg btn-success" ng-href="#/">Splendid!<span class="glyphicon glyphicon-ok"></span></a></p> </div> <div class="row marketing"> <h4>HTML5 Boilerplate</h4> <p> HTML5 Boilerplate is a professional front-end template for building fast, robust, and adaptable web apps or sites. </p> <h4>Angular</h4> <p> AngularJS is a toolset for building the framework most suited to your application development. </p> <h4>Karma</h4> <p>Spectacular Test Runner for JavaScript.</p> </div>'),a.put("views/predio.html",'<h1>Predio</h1> <form novalidate ng-submit="submit()"> <div class="mdl-textfield mdl-js-textfield"> <label class="mdl-textfield__label" for="nome">Name</label> <input class="mdl-textfield__input" type="text" id="nome" ng-model="predio.nome"> </div> <div class="mdl-textfield mdl-js-textfield"> <select ng-options="base as base.nome for base in bases track by base.id" ng-model="base"></select> </div> <input type="submit" class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored" value="Adicionar"> <input type="submit" class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored" value="Concluir">  </form> <!-- List --> <ul class="demo-list-item mdl-list"> <li class="mdl-list__item" ng-repeat="predio in predios track by $index"> <span class="mdl-list__item-primary-content"> {{ predio.nome }} </span> <span class="mdl-list__item-primary-content"> {{ predio.base.nome }} </span> <button class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored" ng-click="editar(predio)"> <i class="fa fa-pencil-square-o" aria-hidden="true"></i> </button>&nbsp; <button class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored" ng-click="excluir(predio)"> <i class="fa fa-trash" aria-hidden="true"></i> </button> </li> </ul>'),a.put("views/produtos.html",'<h1>Produtos</h1> <ul class="demo-list-item mdl-list"> <li class="mdl-list__item mdl-list__item--three-line" ng-repeat="produto in list track by $index"> <span class="mdl-list__item-primary-content"> <span>{{produto.nome}}</span> <span class="mdl-list__item-text-body"> Usu√°rio: {{ produto.usuario.nome }} </span> </span> <button class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored" ng-click="editar(item)"> <i class="fa fa-pencil-square-o" aria-hidden="true"></i> </button>&nbsp; <button class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored" ng-click="exckuir(item)"> <i class="fa fa-trash" aria-hidden="true"></i> </button> </li> </ul>')}]);