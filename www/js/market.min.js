"use strict";var market=angular.module("market",["ionic"]).run(function($ionicPlatform){$ionicPlatform.ready(function(){window.cordova&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),cordova.plugins.Keyboard.disableScroll(!0)),window.StatusBar&&StatusBar.styleDefault()})});
!function(app){app.config(function($stateProvider,$urlRouterProvider){$stateProvider.state("introduction",{url:"/market/intro",templateUrl:"templates/public/welcome.html",controller:"WelcomeCtrl"}),$stateProvider.state("authentication",{url:"/market/auth",templateUrl:"templates/public/authentication.html",controller:"AuthenticationCtrl"}),$stateProvider.state("private",{url:"/market/private",templateUrl:"templates/private/menu.html",controller:"MainCtrl"}),$stateProvider.state("private.home",{url:"/home",views:{"main-content":{templateUrl:"templates/private/home.html",controller:"HomeCtrl"}}}),$urlRouterProvider.otherwise("/market/intro")})}(market);
!function(app){app.controller("AuthenticationCtrl",function($scope,$state,UserService,$ionicLoading){$scope.googleSignIn=function(){return window.plugins?($ionicLoading.show({template:"Logging in..."}),void window.plugins.googleplus.login({},function(user_data){UserService.setUser({userID:user_data.userId,name:user_data.displayName,email:user_data.email,picture:user_data.imageUrl,accessToken:user_data.accessToken,idToken:user_data.idToken}),$ionicLoading.hide(),$state.go("app.home")},function(msg){$ionicLoading.hide()})):void $state.go("private.home")},$scope.introducao=function(){$state.go("introduction")}})}(market);
!function(app){app.controller("HomeCtrl",function($scope,$state){})}(market);
!function(app){app.controller("MainCtrl",function($scope,$state,UserService,$ionicLoading){$scope.user=UserService.getUser(),$scope.showLogOutMenu=function(){if(!window.plugins)return void $state.go("introduction");$ionicActionSheet.show({destructiveText:"Logout",titleText:"Are you sure you want to logout? This app is awsome so I recommend you to stay.",cancelText:"Cancel",cancel:function(){},buttonClicked:function(index){return!0},destructiveButtonClicked:function(){$ionicLoading.show({template:"Logging out..."}),window.plugins.googleplus.logout(function(msg){console.log(msg),$ionicLoading.hide(),$state.go("introduction")},function(fail){console.log(fail)})}})}})}(market);
!function(app){app.controller("WelcomeCtrl",function($scope,$state){$scope.options={loop:!1,effect:"slide",speed:500},$scope.data={},$scope.activeIndex=0,$scope.autenticate=function(){$state.go("authentication")},$scope.next=function(){$scope.data.slider.slideNext()},$scope.previous=function(){$scope.data.slider.slidePrev()}})}(market);
!function(app){app.service("UserService",function(){var setUser=function(user_data){window.localStorage.starter_google_user=JSON.stringify(user_data)},getUser=function(){return JSON.parse(window.localStorage.starter_google_user||"{}")};return{getUser:getUser,setUser:setUser}})}(market);